<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Econometría</title>
    <meta charset="utf-8" />
    <meta name="author" content="Carlos A. Yanes Guerra" />
    <meta name="date" content="2024-01-01" />
    <script src="libs/header-attrs-2.26/header-attrs.js"></script>
    <link href="libs/tile-view-0.2.6/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view-0.2.6/tile-view.js"></script>
    <script src="libs/xaringanExtra_fit-screen-0.2.6/fit-screen.js"></script>
    <script src="libs/clipboard-2.0.6/clipboard.min.js"></script>
    <link href="libs/shareon-1.4.1/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon-1.4.1/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain-0.2.6/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain-0.2.6/shareagain.js"></script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="my-css.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">





name: xaringan-title
class: inverse, left, bottom
background-image: url(images/beach1.jpg)
background-size: cover

# **Econometría**
----

## **&lt;br/&gt; Diferencias en Diferencias**

### Carlos A. Yanes Guerra
### 2024



---
# Estimador de Diferencias en Diferencias

--

- Es un método de .hi-turquoise[inferencia causal]

--

&gt; Es un método general para cuando surge una política exógena
que afecta más a un grupo que a otro

--

- Se utiliza con datos de corte transversal repetidos a lo largo del tiempo

--

- También puede utilizarse comparando .hi-pink[subgrupos].

--

DID se basa fundamentalmente en un supuesto denominado .ul[tendencias paralelas]. En ausencia de tratamiento, las tendencias de los grupos tratados y no tratados son iguales.

---
# Estimador de Diferencias en Diferencias

--

&lt;img src="images/DID1.png" width="980" /&gt;


---
# Estimador de Diferencias en Diferencias

--

### Dif-en-Dif, ¿Qué estima?

--

`$$\tau_{dif-en-dif}= [\mathbb{E}(Y_{2}|D=1)-\mathbb{E}(Y_{1}|D=1) ] - [ \color{blue}{ \mathbb{E}(Y_{2}|D=0)-\mathbb{E}(Y_{1}|D=0)}]$$`

--

Donde:

- La *primera* parte es el cambio .ul[esperado] entre el periodo anterior y el posterior a la implementación del .hi-pink[tratamiento] para los **tratados**.

--

- La *segunda* parte es el cambio .ul[esperado] entre el periodo anterior y el posterior a la implementación del .hi-pink[tratamiento] para los .hi-purple[controles].

---
# Estimador de Diferencias en Diferencias

--

### Análogo muestral

--

`$$\tau_{dif-en-dif}= [(\bar{Y}_{2}|D=1)-(\bar{Y}_{1}|D=1) ] - [ \color{blue}{ (\bar{Y}_{2}|D=0)-(\bar{Y}_{1}|D=0)} ]$$`

--

Lo cual, se puede simplificar si se plantea el cambio temporal (longitudinal), que puede definirse como `\(\triangle Y\)`:

--

`$$\boxed{ \widehat{\tau}_{dif-en-dif}= (\triangle \bar{Y}|D=1)- (\triangle \bar{Y}|D=0)}$$`

---
# Estimador de Diferencias en Diferencias

--

### ¿Cuándo usar el estimador DIF-en-DIF o DID?

--

- El estimador **DID** es más .hi[eficiente] que el de diferencia cuando algunos determinantes *no observables* de la variable .ul[objetivo] son persistentes en el tiempo.

--

- La eficiencia va en dirección de la fracción de la varianza de `\(Y\)` que este explicada por factores no observados.

--

- Cuando (*no hay balance*) entre grupo de .hi-purple[control] y .hi-pink[tratamiento] aún con asignación aleatoria se generan asignaciones parcialmente aleatorias.

--

- Si el .hi-pink[tratamiento] esta **correlacionado** con el nivel inicial de `\(Y\)` antes de la intervención, ese estimador de diferencias será .ul[sesgado]. Pero el .hi-orange[Dif-en-Dif] no necesariamente.

---
class: inverse, middle

# DID en entorno de dos periodos
&lt;img src="images/lognig.png" width="280" /&gt;

---
# DID en dos periodos de tiempo

--

&gt; Consideremos un experimento que se hizo naturalmente, pero que iba interviniendo un grupo mas que otro.

--

Vamos a decir que `\(\color{purple}{Y_i}\)` es la variable .hi-purple[resultado] y `\(D_i\)` es la de **tratamiento**.

--

Esto es : `\(D_i=1\)` si es tratado y `\(D_i=0\)`, de lo contrario.

--

### Método 1: Comparando T-C en un mismo momento de tiempo

--

`$$\text{Efecto del Tratamiento}= \overline{Y}\; \text{para tratados} - \overline{Y}\; \color{purple}{\text{para no tratados}}$$`

--

`$$\tau=\overline{Y}_{1i}-\color{purple}{\overline{Y}_{0i}}$$`

--

<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg> Lo único que nos puede llevar hacer las cosas mal, son las diferencias de características de los individuos que estamos evaluando

---
count: false
# DID en dos periodos de tiempo



&gt; Consideremos un experimento que se hizo naturalmente, pero que iba interviniendo un grupo mas que otro.



Vamos a decir que `\(\color{purple}{Y_i}\)` es la variable .hi-purple[resultado] y `\(D_i\)` es la de **tratamiento**.



Esto es : `\(D_i=1\)` si es tratado y `\(D_i=0\)`, de lo contrario.

--

### Método 2: Comparando T-T Antes y despues

--

`$$\text{Efecto del Tratamiento}= (\overline{Y}\; \text{para tratados en}\;|\;t=2) - (\overline{Y}\; \color{red}{\text{para tratados en}}\;|\;t=1)$$`

--

`$$\tau=\overline{Y}_{1t=2}-\color{purple}{\overline{Y}_{1t=1}}$$`

--

<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg> Lo único que nos puede llevar hacer las cosas mal, es que en el tiempo (*todo evoluciona/cambia*) y es complejo separar eso así no mas!!

---
count: false
# DID en dos periodos de tiempo



&gt; Consideremos un experimento que se hizo naturalmente, pero que iba interviniendo un grupo mas que otro.



Vamos a decir que `\(\color{purple}{Y_i}\)` es la variable .hi-purple[resultado] y `\(D_i\)` es la de **tratamiento**.



Esto es : `\(D_i=1\)` si es tratado y `\(D_i=0\)`, de lo contrario.

--

### Método definitivo: Diferencias de diferencias

--

`$$\tau_{DID}= \triangle\overline{Y}_{d=1}\; \text{para todos los tratados} - \overline{Y}_{d=0}\; \color{red}{\text{para todos los controles}}$$`

--

algo así como:

`$$\tau_{DID}=(\overline{Y}_{1t=2}-\color{red}{\overline{Y}_{1t=1}})-(\overline{Y}_{0t=2}-\color{purple}{\overline{Y}_{0t=1}})$$`

--

<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:blue;overflow:visible;position:relative;"><path d="M512 256c0 .9 0 1.8 0 2.7c-.4 36.5-33.6 61.3-70.1 61.3H344c-26.5 0-48 21.5-48 48c0 3.4 .4 6.7 1 9.9c2.1 10.2 6.5 20 10.8 29.9c6.1 13.8 12.1 27.5 12.1 42c0 31.8-21.6 60.7-53.4 62c-3.5 .1-7 .2-10.6 .2C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"/></svg> de esta forma aproximamos mejor el hallazgo del cálculo deseado de esta parte controlando por tiempo y por grupo.

---
# DID en dos periodos de tiempo

--

## Resumiendo

--

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Tratados &lt;br&gt; \((D=1)\) &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; No Tratados &lt;br&gt; \((D=0)\) &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Diferencia &lt;br&gt; sobre el Tratamiento &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;font-style: italic;color: black !important;vertical-align:top;"&gt; Pre \( (t = 1) \) &lt;/td&gt;
   &lt;td style="text-align:left;font-style: italic;color: black !important;"&gt; \(\beta_0 + \beta_2\) &lt;/td&gt;
   &lt;td style="text-align:left;font-style: italic;color: red !important;"&gt; \(\beta_0\) &lt;/td&gt;
   &lt;td style="text-align:left;color: black !important;"&gt; \(\beta_2\) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;font-style: italic;color: black !important;vertical-align:top;"&gt; Post \( (t = 2) \) &lt;/td&gt;
   &lt;td style="text-align:left;font-style: italic;color: black !important;"&gt; \(\beta_0+\beta_1+\beta_2 +\beta_3\) &lt;/td&gt;
   &lt;td style="text-align:left;font-style: italic;color: red !important;"&gt; \(\beta_0 + \beta_1\) &lt;/td&gt;
   &lt;td style="text-align:left;color: black !important;"&gt; \(\beta_2 + \beta_3\) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;font-style: italic;color: black !important;vertical-align:top;"&gt; Cambio en &lt;br&gt; el tiempo &lt;/td&gt;
   &lt;td style="text-align:left;font-style: italic;color: black !important;"&gt; \(\beta_1 + \beta_3\) &lt;/td&gt;
   &lt;td style="text-align:left;font-style: italic;color: red !important;"&gt; \(\beta_1\) &lt;/td&gt;
   &lt;td style="text-align:left;color: black !important;"&gt; Dif en Dif = \(\beta_3 !\) &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;





---
class: inverse, middle

# Computo de regresión de DID
&lt;img src="images/lognig.png" width="280" /&gt;

---
layout:true
# Regresión DID

---

--

<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M334.5 414c8.8 3.8 19 2 26-4.6l144-136c4.8-4.5 7.5-10.8 7.5-17.4s-2.7-12.9-7.5-17.4l-144-136c-7-6.6-17.2-8.4-26-4.6s-14.5 12.5-14.5 22l0 72L32 192c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32l288 0 0 72c0 9.6 5.7 18.2 14.5 22z"/></svg> El estimador de .hi[diferencias en diferencias] (DID) puede ser obtenido como el **coeficiente** de `\(t \times d\)` en una regresión de MCO

--

`$$y_i=\beta_0+\beta_1t_i+\beta_2D_i+\beta_3t_i\times D_i+ u_i$$`
--

- Vamos a tener tres (3) elementos claves que vienen a ser los datos .hi[binarios] tomando a `\((t)\)` como la dummy de `tiempo` cuando `\(t=1\)` esta en el periodo posterior y si `\(t=0\)` en el anterior.

--

- El siguiente elemento es su fué *tratado* o *no tratado*.

--

- La .ul[interacción] que hace referencia al parámetro `\(\beta_3\)`, viene a ser `\(\color{red}{t \times D_i=1}\)` si el individuo fue tratado en el periodo posterior y `\(t \times D_i=0\)` de lo contrario.
---
layout:false
class: inverse, middle

# Mas del contexto del DID
&lt;img src="images/lognig.png" width="280" /&gt;
---
layout: true
# Contexto del DID

---

--

## ¿Cuándo adicionalmente podemos usar el estimador DIF-en-DIF?

--

- El estimador **DID** es más .hi[eficiente] que el de diferencia cuando algunos determinantes *no observables* de la variable .hi[objetivo] son persistentes en el tiempo.

- La eficiencia va en dirección de la fracción de la varianza de `\(Y\)` que este explicada por factores no observados.

- Cuando (.hi[no hay balance]) entre grupo de .hi-purple[control] y .hi[tratamiento] aún con asignación aleatoria se generan asignaciones parcialmente aleatorias.

- Si el .hi[tratamiento] esta *correlacionado* con el nivel inicial de `\(Y\)` antes de la intervención, ese estimador de diferencias será .ul[sesgado]. Pero el .hi-orange[Dif-en-Dif] no necesariamente.

---

--

## Supuesto de tendencia paralela

--

La .hi[variable] de resultado `\(Y\)` evoluciona de manera natural en el tiempo en la misma forma que para el grupo de control como el de tratamiento.

--

Lo que permite utilizar `\([(\bar{Y}_{1}|D=1)-(\bar{Y}_{1}|D=0)]\)` como control apropiado y suficiente para controlar diferencias pre-existentes entre los **tratados** y *controles*.

$$
\boxed{\tau_{DID} \Rightarrow \; \text{es insesgado}}
$$
---

--

## DID con modelo de panel

--

<svg aria-hidden="true" role="img" viewBox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:blue;overflow:visible;position:relative;"><path d="M160 24c0-13.3 10.7-24 24-24H296c13.3 0 24 10.7 24 24s-10.7 24-24 24H280L384 192H500.4c7.7 0 15.3 1.4 22.5 4.1L625 234.4c9 3.4 15 12 15 21.6s-6 18.2-15 21.6L522.9 315.9c-7.2 2.7-14.8 4.1-22.5 4.1H384L280 464h16c13.3 0 24 10.7 24 24s-10.7 24-24 24H184c-13.3 0-24-10.7-24-24s10.7-24 24-24h8V320H160l-54.6 54.6c-6 6-14.1 9.4-22.6 9.4H64c-17.7 0-32-14.3-32-32V288c-17.7 0-32-14.3-32-32s14.3-32 32-32V160c0-17.7 14.3-32 32-32H82.7c8.5 0 16.6 3.4 22.6 9.4L160 192h32V48h-8c-13.3 0-24-10.7-24-24zM80 240c-8.8 0-16 7.2-16 16s7.2 16 16 16h64c8.8 0 16-7.2 16-16s-7.2-16-16-16H80z"/></svg> Podemos entonces establecer:

--

`$$Y_{it2}-Y_{it1}= \beta_{0}+\beta_{1}D_{i}+ (u_{it2}-u_{it1})$$`  
--

Su analogo vendría a ser:

--


`$$\triangle Y_{i}= \beta_{0}+\beta_{1}D_{i}+ \nu_{i}$$`
--

<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7H336c-8.8 0-16-7.2-16-16V118.6c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 408a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg> El parámetro `\(\beta_{1}\)` es el .hi[impacto] del programa por método de .hi-orange[diferencias en diferencias].

---

--
## Al hacer su esperanza condicional

`$$\begin{aligned}
    \mathbb{E}(\triangle Y|D=1)=&amp; \beta_{0}+\beta_{1}+\mathbb{E}(\nu|D=1) \\
    =&amp; \beta_{0}+\beta_{1}\\
    \mathbb{E}(\triangle Y|D=0)=&amp; \beta_{0}+\mathbb{E}(\nu|D=0) \\
    =&amp; \beta_{0}
\end{aligned}$$`

--

<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7H336c-8.8 0-16-7.2-16-16V118.6c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 408a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg> Por independencia condicional `\(\Rightarrow\)` `\(\mathbb{E}(u_{i}|D_{i})=0\)`, por ende `\(\beta_{1}\)` es un estimador indicado.

---

--

## Panel general con diferencias en diferencias

--


`$$Y_{it} = \alpha + \beta_1 \text{Tratado}_i + \beta_2 \text{Post}_t + \beta_3 (\text{Tratado}_i \times \text{Post}_t) + \gamma X_{it} + \epsilon_{it}$$`
--

donde:

--

- `\(Y_{it}\)` es la .hi-purple[variable dependiente] para el individuo `\(i\)` en el tiempo `\(t\)`.
- `\(\text{Tratado}_i\)` es una variable **dicotómica** que toma el valor de 1 si el individuo pertenece al .hi[grupo tratado] y 0 si pertenece al grupo control.
- `\(\text{Post}_t\)` es una variable **dicotómica** que toma el valor de 1 en el periodo posterior al tratamiento y 0 antes del tratamiento.
- `\(\text{Tratado}_i \times \text{Post}_t\)` es el .ul[término de interacción] entre el tratamiento y el tiempo, que captura el efecto del tratamiento.
- `\(X_{it}\)` es un vector de .hi[controles adicionales] que pueden afectar `\(Y_{it}\)`.
- `\(\epsilon_{it}\)` es el término de error.

---

--

## Diferencias en diferencias con múltiples periodos

--


`$$Y_{it} = \alpha + \beta_1 \text{Tratado}_i + \beta_2 \text{Post1}_t + \beta_3 \text{Post2}_t + \beta_4 (\text{Tratado}_i \times \text{Post1}_t) + \beta_5 (\text{Tratado}_i \times \text{Post2}_t) + \gamma X_{it} + \epsilon_{it}$$`

--

En este modelo, los coeficientes `\(\beta_4\)` y `\(\beta_5\)` representan los estimadores de .hi[diferencias en diferencias] para los periodos `\(t=2\)` y `\(t=3\)`, respectivamente, mostrando el efecto causal del tratamiento en esos periodos.

---
layout: false
class: inverse, middle

# Ejemplos
&lt;img src="images/lognig.png" width="280" /&gt;

---
# Ejemplo: Decreto de regalías 

--

Programa: Regalías

.hi[Datos] : Encuesta de hogares (repetidas).

.ul[Linea de base]: Antes de hallazgo de yacimiento

*Seguimiento*: Después del experimento natural (hallar petroleo)

.hi-red[Consideraciones]:

**Grupo Control** Residentes de municipios **sin** petroleo que pertenecen al SISBEN 1 y 2.

.hi-purple[Grupo Tratados] Residentes de municipios .hi[con] petroleo que pertenecen al SISBEN 1 y 2.

---
# Ejemplo: Decreto de regalías 

--

Al no poseer un panel, pero si datos sobre individuos que residen en municipios petroleros (serán tratados después del decreto) y municipios no petroleros (que no serán tratados porque no poseen regalías).

--

&lt;img src="images/textit.png" width="780" /&gt;


---
# DID con PSM

--

## Dobles diferencias emparejadas

--

<svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:red;overflow:visible;position:relative;"><path d="M224 0c-17.7 0-32 14.3-32 32V49.9C119.5 61.4 64 124.2 64 200v33.4c0 45.4-15.5 89.5-43.8 124.9L5.3 377c-5.8 7.2-6.9 17.1-2.9 25.4S14.8 416 24 416H424c9.2 0 17.6-5.3 21.6-13.6s2.9-18.2-2.9-25.4l-14.9-18.6C399.5 322.9 384 278.8 384 233.4V200c0-75.8-55.5-138.6-128-150.1V32c0-17.7-14.3-32-32-32zm0 96h8c57.4 0 104 46.6 104 104v33.4c0 47.9 13.9 94.6 39.7 134.6H72.3C98.1 328 112 281.3 112 233.4V200c0-57.4 46.6-104 104-104h8zm64 352H224 160c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7s18.7-28.3 18.7-45.3z"/></svg> Este método combina información longitudinal, PSM y diferencias en diferencias.

--

- Se relajan los supuestos de cada método y, por lo tanto los resultados se vuelven mas robustos.
- Al combinar PSM con Dif en Dif, se puede encontrar que la selección del programa pueda depender de características .ul[no observables] siempre que sean constantes en el tiempo.

---
# DID con PSM

--

## Supuestos y estimador DDE

--

- Independencia .hi[condicional] (CI):
`$$u_{it1}-u_{it0} \perp D|X, \; \forall \; X$$`

--

&gt;Tratados y controles habrían evolucionado de la misma manera si ninguno hubiera sido objeto de tratamiento

--

<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:blue;overflow:visible;position:relative;"><path d="M27.5 162.2L9 187.1h90.5l6.9-130.7-78.9 105.8zM396.3 45.7L267.7 32l135.7 147.2-7.1-133.5zM112.2 218.3l-11.2-22H9.9L234.8 458zm2-31.2h284l-81.5-88.5L256.3 33zm297.3 9.1L277.6 458l224.8-261.7h-90.9zM415.4 69L406 56.4l.9 17.3 6.1 113.4h90.3zM113.5 93.5l-4.6 85.6L244.7 32 116.1 45.7zm287.7 102.7h-290l42.4 82.9L256.3 480l144.9-283.8z"/></svg> Soporte común:
`$$0&lt;P(D=1|X)&lt;1$$`

--

El Estimador ATT viene a ser:
    
`$$\tau_{ATT} = \mathbb{E}_{P(X)|D=1} \left[ \mathbb{E}\left(Y_{t1}(1) - Y_{t0}(1) \mid D=1, P(X)\right) - \mathbb{E}\left(Y_{t1}(0) - Y_{t0}(0) \mid D=0, P(X)\right) \right]$$`

---
# Ejemplo: DDE

--

- Piense en lo siguiente

--

| Tratados                       | Controles                      |
|--------------------------------|---------------------------------|
| Talla para la edad en T=2      | Talla para la edad en T=2       |
| Talla para la edad en T=1      | Talla para la edad en T=1       |

---
# Ejemplo: DDE
 
--

Ya que tiene dos observaciones de talla para un mismo individuo (antes y después), podemos tener el ATT:

--

`$$\triangle Y= Y_{t1}-Y_{t0}$$`

.ex[Será la diferencia de talla de individuos por edad del grupo de tratados en comparación al control]

--

Para el calculo de la .ul[probabilidad] de participación, dadas las características de los individuos.

--

`$$D= \beta X+ \mu$$`

--

D hace referencia a la `\(dummy\)` de tratamiento y `\(X\)` es el vector de variables tales como: *Ingreso del jefe de hogar, numero de personas del hogar, educación, etc.*
        
---
class: inverse
# Bibliografía

<svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H384h32c17.7 0 32-14.3 32-32s-14.3-32-32-32V384c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H384 96zm0 384H352v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg> Angrist, J. D., &amp; Pischke, J. S. (2009). *Mostly harmless econometrics: An empiricist's companion*. Princeton university press.

<svg aria-hidden="true" role="img" viewBox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16H224v80c0 17.7 14.3 32 32 32h80V448c0 8.8-7.2 16-16 16H64zM64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0H64zm97 289c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L79 303c-9.4 9.4-9.4 24.6 0 33.9l48 48c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-31-31 31-31zM257 255c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l31 31-31 31c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l48-48c9.4-9.4 9.4-24.6 0-33.9l-48-48z"/></svg> Rubin, E. (2021) *Econometrics Lectures class*.

<svg aria-hidden="true" role="img" viewBox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16H224v80c0 17.7 14.3 32 32 32h80V448c0 8.8-7.2 16-16 16H64zM64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0H64zm97 289c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L79 303c-9.4 9.4-9.4 24.6 0 33.9l48 48c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-31-31 31-31zM257 255c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l31 31-31 31c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l48-48c9.4-9.4 9.4-24.6 0-33.9l-48-48z"/></svg> Raze, K. (2022) *Labor Economics Lectures class*.

<svg aria-hidden="true" role="img" viewBox="0 0 576 512" style="height:1em;width:1.12em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg> Angrist, J. (2022) *Mastering Econometrics* [Con Acceso abril 2022](https://mru.org/mastering-econometrics-joshua-angrist).

<svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H384h32c17.7 0 32-14.3 32-32s-14.3-32-32-32V384c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H384 96zm0 384H352v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg> Wooldridge, J. M. (2015). *Introductory econometrics: A modern approach*. Cengage learning.


---
name: adios
class: middle, inverse

.pull-left[
# **¡Gracias!**
&lt;br/&gt;
## Econometría

### Seguimos aprendiendo
]

.pull-right[
.right[
&lt;img style="border-radius: 50%;"
src="https://avatars.githubusercontent.com/u/39503983?v=4"
width="150px" /&gt;

[<svg aria-hidden="true" role="img" viewBox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"/></svg> Syllabus/ Curso](https://carlosyanes.netlify.app/contenidoc/SyllabusEconometriaME.pdf)&lt;br/&gt;
[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> @keynes37](https://twitter.com/keynes37)&lt;br/&gt;
[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M64 112c-8.8 0-16 7.2-16 16v22.1L220.5 291.7c20.7 17 50.4 17 71.1 0L464 150.1V128c0-8.8-7.2-16-16-16H64zM48 212.2V384c0 8.8 7.2 16 16 16H448c8.8 0 16-7.2 16-16V212.2L322 328.8c-38.4 31.5-93.7 31.5-132 0L48 212.2zM0 128C0 92.7 28.7 64 64 64H448c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"/></svg> cayanes@uninorte.edu.co](mailto:cayanes@uninorte.edu.co)
]
]





    
    
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
